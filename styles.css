/* ═══════════════════════════════════════════════
   MINDBLOOM — CSS
   Mental Health Journaling App
   ═══════════════════════════════════════════════ */

/* ─── Theme Variables ─── */
:root {
  --bg-primary: #0f1019;
  --bg-secondary: #181926;
  --bg-card: #1e2033;
  --text-primary: #e8e6f0;
  --text-secondary: #9994b8;
  --accent: #7c6fea;
  --accent-soft: rgba(124, 111, 234, 0.15);
  --accent-glow: rgba(124, 111, 234, 0.4);
  --accent-rgb: 124, 111, 234;
  --gradient-1: #7c6fea;
  --gradient-2: #5b8dee;
  --gradient-3: #4ecdc4;
  --mood-orb-1: rgba(124, 111, 234, 0.3);
  --mood-orb-2: rgba(78, 205, 196, 0.2);
  --mood-orb-3: rgba(91, 141, 238, 0.15);
  --border: rgba(255, 255, 255, 0.06);
  --shadow: rgba(0, 0, 0, 0.4);
  --avatar-bg: linear-gradient(135deg, var(--gradient-1), var(--gradient-2));
  --transition-speed: 0.8s;
}

[data-emotion="happy"] {
  --bg-primary: #0d1a0f; --bg-secondary: #142118; --bg-card: #1a2b1e;
  --accent: #4ecdc4; --accent-soft: rgba(78, 205, 196, 0.15); --accent-glow: rgba(78, 205, 196, 0.4); --accent-rgb: 78, 205, 196;
  --gradient-1: #4ecdc4; --gradient-2: #a8e6cf; --gradient-3: #ffd93d;
  --mood-orb-1: rgba(78, 205, 196, 0.3); --mood-orb-2: rgba(168, 230, 207, 0.2); --mood-orb-3: rgba(255, 217, 61, 0.15);
  --avatar-bg: linear-gradient(135deg, #4ecdc4, #a8e6cf);
}

[data-emotion="sad"] {
  --bg-primary: #0a0e1a; --bg-secondary: #111729; --bg-card: #161e35;
  --accent: #6b8dd6; --accent-soft: rgba(107, 141, 214, 0.15); --accent-glow: rgba(107, 141, 214, 0.35); --accent-rgb: 107, 141, 214;
  --gradient-1: #6b8dd6; --gradient-2: #8e7cc3; --gradient-3: #5c6ea0;
  --mood-orb-1: rgba(107, 141, 214, 0.25); --mood-orb-2: rgba(142, 124, 195, 0.2); --mood-orb-3: rgba(92, 110, 160, 0.15);
  --avatar-bg: linear-gradient(135deg, #6b8dd6, #8e7cc3);
}

[data-emotion="anxious"] {
  --bg-primary: #14100d; --bg-secondary: #1f1914; --bg-card: #2a211a;
  --accent: #e8a87c; --accent-soft: rgba(232, 168, 124, 0.15); --accent-glow: rgba(232, 168, 124, 0.35); --accent-rgb: 232, 168, 124;
  --gradient-1: #e8a87c; --gradient-2: #d4896b; --gradient-3: #c27052;
  --mood-orb-1: rgba(232, 168, 124, 0.25); --mood-orb-2: rgba(212, 137, 107, 0.2); --mood-orb-3: rgba(194, 112, 82, 0.12);
  --avatar-bg: linear-gradient(135deg, #e8a87c, #d4896b);
}

[data-emotion="angry"] {
  --bg-primary: #160d0d; --bg-secondary: #221414; --bg-card: #2d1a1a;
  --accent: #e07070; --accent-soft: rgba(224, 112, 112, 0.15); --accent-glow: rgba(224, 112, 112, 0.35); --accent-rgb: 224, 112, 112;
  --gradient-1: #e07070; --gradient-2: #c75050; --gradient-3: #d4896b;
  --mood-orb-1: rgba(224, 112, 112, 0.25); --mood-orb-2: rgba(199, 80, 80, 0.2); --mood-orb-3: rgba(212, 137, 107, 0.12);
  --avatar-bg: linear-gradient(135deg, #e07070, #c75050);
}

[data-emotion="grateful"] {
  --bg-primary: #12100a; --bg-secondary: #1d1a10; --bg-card: #262114;
  --accent: #f0c75e; --accent-soft: rgba(240, 199, 94, 0.15); --accent-glow: rgba(240, 199, 94, 0.35); --accent-rgb: 240, 199, 94;
  --gradient-1: #f0c75e; --gradient-2: #e8a87c; --gradient-3: #c9b458;
  --mood-orb-1: rgba(240, 199, 94, 0.25); --mood-orb-2: rgba(232, 168, 124, 0.2); --mood-orb-3: rgba(201, 180, 88, 0.15);
  --avatar-bg: linear-gradient(135deg, #f0c75e, #e8a87c);
}

[data-emotion="hopeful"] {
  --bg-primary: #0d1412; --bg-secondary: #141f1b; --bg-card: #1b2a25;
  --accent: #69d2a0; --accent-soft: rgba(105, 210, 160, 0.15); --accent-glow: rgba(105, 210, 160, 0.35); --accent-rgb: 105, 210, 160;
  --gradient-1: #69d2a0; --gradient-2: #4ecdc4; --gradient-3: #a8e6cf;
  --mood-orb-1: rgba(105, 210, 160, 0.25); --mood-orb-2: rgba(78, 205, 196, 0.2); --mood-orb-3: rgba(168, 230, 207, 0.15);
  --avatar-bg: linear-gradient(135deg, #69d2a0, #4ecdc4);
}

[data-emotion="lonely"] {
  --bg-primary: #0e0d14; --bg-secondary: #161422; --bg-card: #1e1b30;
  --accent: #9b8ec4; --accent-soft: rgba(155, 142, 196, 0.15); --accent-glow: rgba(155, 142, 196, 0.35); --accent-rgb: 155, 142, 196;
  --gradient-1: #9b8ec4; --gradient-2: #7c6fea; --gradient-3: #6b5fbd;
  --mood-orb-1: rgba(155, 142, 196, 0.25); --mood-orb-2: rgba(124, 111, 234, 0.15); --mood-orb-3: rgba(107, 95, 189, 0.12);
  --avatar-bg: linear-gradient(135deg, #9b8ec4, #7c6fea);
}

[data-emotion="overwhelmed"] {
  --bg-primary: #13100d; --bg-secondary: #1e1914; --bg-card: #29211a;
  --accent: #d4896b; --accent-soft: rgba(212, 137, 107, 0.15); --accent-glow: rgba(212, 137, 107, 0.35); --accent-rgb: 212, 137, 107;
  --gradient-1: #d4896b; --gradient-2: #c27052; --gradient-3: #e8a87c;
  --mood-orb-1: rgba(212, 137, 107, 0.25); --mood-orb-2: rgba(194, 112, 82, 0.18); --mood-orb-3: rgba(232, 168, 124, 0.12);
  --avatar-bg: linear-gradient(135deg, #d4896b, #c27052);
}

[data-emotion="calm"] {
  --bg-primary: #0d1014; --bg-secondary: #141820; --bg-card: #1a2030;
  --accent: #7caee8; --accent-soft: rgba(124, 174, 232, 0.15); --accent-glow: rgba(124, 174, 232, 0.35); --accent-rgb: 124, 174, 232;
  --gradient-1: #7caee8; --gradient-2: #5b8dee; --gradient-3: #4ecdc4;
  --mood-orb-1: rgba(124, 174, 232, 0.25); --mood-orb-2: rgba(91, 141, 238, 0.18); --mood-orb-3: rgba(78, 205, 196, 0.12);
  --avatar-bg: linear-gradient(135deg, #7caee8, #5b8dee);
}

[data-emotion="confused"] {
  --bg-primary: #11100d; --bg-secondary: #1a1814; --bg-card: #24211a;
  --accent: #c4b08e; --accent-soft: rgba(196, 176, 142, 0.15); --accent-glow: rgba(196, 176, 142, 0.35); --accent-rgb: 196, 176, 142;
  --gradient-1: #c4b08e; --gradient-2: #a89670; --gradient-3: #d4c4a0;
  --mood-orb-1: rgba(196, 176, 142, 0.25); --mood-orb-2: rgba(168, 150, 112, 0.18); --mood-orb-3: rgba(212, 196, 160, 0.12);
  --avatar-bg: linear-gradient(135deg, #c4b08e, #a89670);
}

/* ─── Reset ─── */
* { margin: 0; padding: 0; box-sizing: border-box; }

body {
  font-family: 'DM Sans', sans-serif;
  background: var(--bg-primary);
  color: var(--text-primary);
  min-height: 100vh;
  overflow-x: hidden;
  transition: background var(--transition-speed) ease, color var(--transition-speed) ease;
}

/* ─── Atmosphere ─── */
.mood-atmosphere { position: fixed; inset: 0; pointer-events: none; z-index: 0; overflow: hidden; }
.mood-orb { position: absolute; border-radius: 50%; filter: blur(100px); transition: all 1.5s cubic-bezier(0.4,0,0.2,1); animation: orbFloat 12s ease-in-out infinite; }
.mood-orb:nth-child(1) { width: 500px; height: 500px; background: var(--mood-orb-1); top: -10%; left: -5%; }
.mood-orb:nth-child(2) { width: 400px; height: 400px; background: var(--mood-orb-2); bottom: -5%; right: -10%; animation-delay: -4s; }
.mood-orb:nth-child(3) { width: 300px; height: 300px; background: var(--mood-orb-3); top: 40%; left: 50%; animation-delay: -8s; }
@keyframes orbFloat { 0%,100%{transform:translate(0,0) scale(1)} 33%{transform:translate(30px,-20px) scale(1.05)} 66%{transform:translate(-20px,15px) scale(0.95)} }

.grain { position: fixed; inset: 0; pointer-events: none; z-index: 1; opacity: 0.03;
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E");
  background-repeat: repeat; background-size: 200px; }

.theme-flash { position: fixed; inset: 0; background: var(--accent); opacity: 0; pointer-events: none; z-index: 50; transition: opacity 0.15s ease; }
.theme-flash.active { opacity: 0.06; }

/* ─── App Layout ─── */
.app { position: relative; z-index: 2; max-width: 440px; margin: 0 auto; min-height: 100vh; display: flex; flex-direction: column; }
.screen { display: none; flex: 1; overflow-y: auto; padding-bottom: 80px; }
.screen.active { display: block; animation: screenIn 0.3s ease; }
@keyframes screenIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

/* ─── Status Bar ─── */
.status-bar { display: flex; justify-content: space-between; align-items: center; padding: 16px 24px; font-size: 12px; color: var(--text-secondary); }
.on-device-badge { display: flex; align-items: center; gap: 5px; font-size: 10px; text-transform: uppercase; letter-spacing: 1.5px; color: var(--text-secondary); opacity: 0.7; }
.fl-badge { display: flex; align-items: center; gap: 6px; font-size: 10px; text-transform: uppercase; letter-spacing: 1.5px; color: var(--accent); background: var(--accent-soft); padding: 4px 10px; border-radius: 20px; cursor: pointer; transition: all var(--transition-speed) ease; }
.fl-badge .dot { width: 6px; height: 6px; background: var(--accent); border-radius: 50%; animation: pulse 2s ease-in-out infinite; transition: background var(--transition-speed) ease; }
@keyframes pulse { 0%,100%{opacity:1;transform:scale(1)} 50%{opacity:0.5;transform:scale(0.8)} }

/* ─── Greeting ─── */
.greeting-section { text-align: center; padding: 10px 24px 0; animation: fadeInDown 0.8s ease both; }
.time-greeting { font-size: 11px; text-transform: uppercase; letter-spacing: 2.5px; color: var(--text-secondary); margin-bottom: 8px; }
.greeting-section h1 { font-family: 'Fraunces', serif; font-size: 24px; font-weight: 300; line-height: 1.3; }
.greeting-section h1 span { background: linear-gradient(135deg, var(--gradient-1), var(--gradient-2)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; font-weight: 500; }
.greeting-section .subtitle { font-size: 13px; color: var(--text-secondary); margin-top: 4px; }
@keyframes fadeInDown { from{opacity:0;transform:translateY(-15px)} to{opacity:1;transform:translateY(0)} }
@keyframes fadeInUp { from{opacity:0;transform:translateY(15px)} to{opacity:1;transform:translateY(0)} }

/* ─── Avatar ─── */
.avatar-container { display: flex; justify-content: center; padding: 24px 24px 8px; animation: fadeInUp 0.8s ease 0.2s both; }
.avatar-wrapper { position: relative; width: 130px; height: 130px; cursor: pointer; }
.avatar-ring { position: absolute; inset: -6px; border-radius: 50%; background: linear-gradient(135deg, var(--gradient-1), var(--gradient-2), var(--gradient-3)); animation: ringRotate 8s linear infinite; opacity: 0.6; transition: all var(--transition-speed) ease; }
.avatar-ring::after { content: ''; position: absolute; inset: 2px; border-radius: 50%; background: var(--bg-primary); transition: background var(--transition-speed) ease; }
@keyframes ringRotate { from{transform:rotate(0deg)} to{transform:rotate(360deg)} }
.avatar { position: relative; width: 130px; height: 130px; border-radius: 50%; background: var(--avatar-bg); display: flex; align-items: center; justify-content: center; z-index: 1; transition: background var(--transition-speed) ease, transform 0.3s ease; }
.avatar:hover { transform: scale(1.05); }
.avatar-face { position: relative; width: 65px; height: 65px; }
.avatar-eyes { display: flex; justify-content: center; gap: 18px; margin-bottom: 8px; }
.avatar-eye { width: 10px; height: 10px; background: rgba(255,255,255,0.95); border-radius: 50%; position: relative; animation: blink 4s ease-in-out infinite; }
.avatar-eye::after { content: ''; position: absolute; width: 4px; height: 4px; background: var(--bg-primary); border-radius: 50%; top: 3px; left: 3px; }
@keyframes blink { 0%,45%,55%,100%{transform:scaleY(1)} 50%{transform:scaleY(0.1)} }
.avatar-mouth { width: 22px; height: 11px; border-bottom: 3px solid rgba(255,255,255,0.9); border-radius: 0 0 50% 50%; margin: 0 auto; transition: all 0.5s ease; }
[data-emotion="sad"] .avatar-mouth, [data-emotion="lonely"] .avatar-mouth { border-bottom: none; border-top: 3px solid rgba(255,255,255,0.9); border-radius: 50% 50% 0 0; }
[data-emotion="anxious"] .avatar-mouth, [data-emotion="overwhelmed"] .avatar-mouth { width: 12px; height: 12px; border: 3px solid rgba(255,255,255,0.9); border-radius: 50%; border-bottom: none; border-top: none; }
[data-emotion="angry"] .avatar-mouth { width: 18px; height: 2px; background: rgba(255,255,255,0.9); border: none; border-radius: 2px; }
.avatar-cheeks { position: absolute; bottom: 18px; left: 0; right: 0; display: flex; justify-content: space-between; padding: 0 2px; opacity: 0; transition: opacity 0.5s ease; }
[data-emotion="happy"] .avatar-cheeks, [data-emotion="grateful"] .avatar-cheeks, [data-emotion="hopeful"] .avatar-cheeks { opacity: 1; }
.avatar-cheek { width: 12px; height: 8px; background: rgba(255,255,255,0.25); border-radius: 50%; }
.avatar-particles { position: absolute; inset: -20px; pointer-events: none; }
.particle { position: absolute; width: 4px; height: 4px; background: var(--accent); border-radius: 50%; opacity: 0; animation: particleFloat 3s ease-in-out infinite; transition: background var(--transition-speed) ease; }
.particle:nth-child(1){top:10%;left:5%;animation-delay:0s} .particle:nth-child(2){top:20%;right:8%;animation-delay:.5s} .particle:nth-child(3){bottom:15%;left:10%;animation-delay:1s} .particle:nth-child(4){bottom:25%;right:5%;animation-delay:1.5s} .particle:nth-child(5){top:50%;left:0;animation-delay:2s}
@keyframes particleFloat { 0%,100%{opacity:0;transform:translateY(0) scale(.5)} 50%{opacity:.7;transform:translateY(-10px) scale(1)} }

/* ─── Speech Bubble ─── */
.speech-bubble { text-align: center; padding: 0 40px; margin-bottom: 16px; animation: fadeInUp 0.8s ease 0.25s both; }
.speech-bubble span { display: inline-block; background: var(--bg-card); border: 1px solid var(--border); border-radius: 16px 16px 16px 4px; padding: 10px 18px; font-size: 13px; color: var(--text-secondary); line-height: 1.4; transition: all var(--transition-speed) ease; }

/* ─── Mood Selector ─── */
.mood-selector { display: flex; justify-content: center; gap: 10px; padding: 0 20px; margin-bottom: 20px; animation: fadeInUp 0.8s ease 0.3s both; flex-wrap: wrap; }
.mood-btn { display: flex; flex-direction: column; align-items: center; gap: 3px; background: var(--bg-card); border: 1px solid var(--border); border-radius: 14px; padding: 8px 12px; cursor: pointer; transition: all 0.3s ease; font-family: inherit; color: var(--text-secondary); }
.mood-btn:hover, .mood-btn.active { border-color: var(--accent); background: var(--accent-soft); color: var(--text-primary); transform: translateY(-2px); box-shadow: 0 4px 16px var(--accent-glow); }
.mood-emoji { font-size: 20px; line-height: 1; }
.mood-label { font-size: 9px; text-transform: uppercase; letter-spacing: 1px; }

/* ─── Insights Row ─── */
.insights-row { display: flex; gap: 10px; padding: 0 20px; margin-bottom: 14px; animation: fadeInUp 0.8s ease 0.4s both; }
.insight-card { flex: 1; background: var(--bg-card); border: 1px solid var(--border); border-radius: 14px; padding: 12px; text-align: center; transition: all var(--transition-speed) ease; }
.insight-value { font-family: 'Fraunces', serif; font-size: 22px; font-weight: 500; background: linear-gradient(135deg, var(--gradient-1), var(--gradient-2)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; }
.insight-label { font-size: 9px; text-transform: uppercase; letter-spacing: 1.5px; color: var(--text-secondary); margin-top: 2px; }

/* ─── Analysis Bar ─── */
.analysis-bar { margin: 0 20px 12px; padding: 10px 14px; background: var(--bg-card); border: 1px solid var(--border); border-radius: 12px; display: flex; align-items: center; gap: 10px; font-size: 12px; color: var(--text-secondary); opacity: 0; transform: translateY(10px); transition: all 0.5s ease; }
.analysis-bar.visible { opacity: 1; transform: translateY(0); }
.analysis-icon { width: 28px; height: 28px; background: var(--accent-soft); border-radius: 8px; display: flex; align-items: center; justify-content: center; font-size: 14px; flex-shrink: 0; }
.analysis-text { flex: 1; line-height: 1.4; }
.analysis-text strong { color: var(--accent); transition: color var(--transition-speed) ease; }

/* ─── Journal Card ─── */
.journal-section { flex: 1; padding: 0 20px 20px; animation: fadeInUp 0.8s ease 0.45s both; }
.journal-card { background: var(--bg-card); border: 1px solid var(--border); border-radius: 20px; overflow: hidden; transition: all var(--transition-speed) ease; }
.journal-header { display: flex; align-items: center; justify-content: space-between; padding: 16px 18px 0; }
.journal-header h2 { font-family: 'Fraunces', serif; font-size: 17px; font-weight: 400; }
.date-pill { font-size: 10px; color: var(--accent); background: var(--accent-soft); padding: 4px 10px; border-radius: 20px; letter-spacing: 0.5px; transition: all var(--transition-speed) ease; }
.journal-prompt { padding: 10px 18px 0; font-size: 13px; color: var(--text-secondary); font-style: italic; }
.journal-input-wrap { padding: 10px 18px 0; }
.journal-textarea { width: 100%; min-height: 120px; background: var(--bg-secondary); border: 1px solid var(--border); border-radius: 14px; padding: 14px; font-family: 'DM Sans', sans-serif; font-size: 14px; line-height: 1.7; color: var(--text-primary); resize: none; outline: none; transition: all 0.3s ease; }
.journal-textarea::placeholder { color: var(--text-secondary); opacity: 0.5; }
.journal-textarea:focus { border-color: var(--accent); box-shadow: 0 0 0 3px var(--accent-soft); }
.word-count { padding: 4px 18px 0; font-size: 11px; color: var(--text-secondary); opacity: 0.5; text-align: right; }
.journal-actions { display: flex; justify-content: space-between; align-items: center; padding: 12px 18px 16px; }
.action-left { display: flex; gap: 6px; }
.action-icon-btn { width: 34px; height: 34px; display: flex; align-items: center; justify-content: center; background: var(--bg-secondary); border: 1px solid var(--border); border-radius: 10px; cursor: pointer; color: var(--text-secondary); font-size: 15px; transition: all 0.3s ease; }
.action-icon-btn:hover { border-color: var(--accent); color: var(--accent); background: var(--accent-soft); }
.save-btn { background: linear-gradient(135deg, var(--gradient-1), var(--gradient-2)); border: none; border-radius: 12px; padding: 10px 24px; font-family: 'DM Sans', sans-serif; font-size: 13px; font-weight: 600; color: white; cursor: pointer; letter-spacing: 0.5px; transition: all 0.3s ease; }
.save-btn:hover { transform: translateY(-1px); box-shadow: 0 6px 24px var(--accent-glow); }
.save-btn:disabled { opacity: 0.4; cursor: default; transform: none; box-shadow: none; }

/* ─── Emotion Labeling Screen ─── */
.labeling-screen { padding: 20px; }
.back-btn { background: none; border: none; color: var(--text-secondary); font-family: inherit; font-size: 14px; cursor: pointer; padding: 8px 0; margin-bottom: 10px; transition: color 0.3s; }
.back-btn:hover { color: var(--text-primary); }
.labeling-header { text-align: center; margin-bottom: 24px; }
.labeling-header .labeling-icon { font-size: 40px; margin-bottom: 10px; }
.labeling-header h2 { font-family: 'Fraunces', serif; font-size: 22px; font-weight: 400; margin-bottom: 6px; }
.labeling-header p { font-size: 14px; color: var(--text-secondary); }
.emotion-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; margin-bottom: 20px; }
.emotion-chip { display: flex; align-items: center; gap: 8px; padding: 14px 16px; background: var(--bg-card); border: 1.5px solid var(--border); border-radius: 14px; font-family: 'DM Sans', sans-serif; font-size: 14px; color: var(--text-secondary); cursor: pointer; transition: all 0.3s ease; }
.emotion-chip span { font-size: 18px; }
.emotion-chip:hover { border-color: rgba(var(--accent-rgb), 0.4); background: var(--accent-soft); }
.emotion-chip.selected { border-color: var(--accent); background: var(--accent-soft); color: var(--text-primary); box-shadow: 0 0 20px var(--accent-glow); }
.labeling-preview { background: var(--bg-secondary); border-radius: 12px; padding: 14px; margin-bottom: 20px; }
.preview-label { font-size: 10px; text-transform: uppercase; letter-spacing: 1.5px; color: var(--text-secondary); margin-bottom: 6px; }
.preview-text { font-size: 13px; color: var(--text-primary); line-height: 1.6; max-height: 80px; overflow-y: auto; opacity: 0.8; }
.labeling-actions { display: flex; gap: 12px; justify-content: center; }
.skip-btn { background: none; border: 1px solid var(--border); border-radius: 12px; padding: 10px 24px; font-family: 'DM Sans', sans-serif; font-size: 13px; color: var(--text-secondary); cursor: pointer; transition: all 0.3s; }
.skip-btn:hover { border-color: var(--text-secondary); color: var(--text-primary); }

/* ─── Training Screen ─── */
.training-screen { padding: 40px 20px; text-align: center; }
.training-header h2 { font-family: 'Fraunces', serif; font-size: 22px; font-weight: 400; margin-bottom: 4px; }
.training-header p { font-size: 13px; color: var(--text-secondary); }
.training-visual { display: flex; justify-content: center; padding: 30px 0; }
.training-circle { position: relative; width: 120px; height: 120px; }
.training-ring-svg { position: absolute; inset: 0; transform: rotate(-90deg); }
.training-percent { position: absolute; inset: 0; display: flex; align-items: center; justify-content: center; font-family: 'Fraunces', serif; font-size: 24px; font-weight: 500; color: var(--accent); }
.training-steps { text-align: left; max-width: 320px; margin: 0 auto 24px; }
.training-step { display: flex; align-items: center; gap: 10px; padding: 8px 0; font-size: 13px; color: var(--text-secondary); opacity: 0.3; transition: all 0.4s ease; }
.training-step.active { opacity: 1; color: var(--text-primary); }
.training-step.done { opacity: 0.7; }
.training-step.done .step-icon { color: #4ecdc4; }
.step-icon { font-size: 14px; width: 20px; text-align: center; }
.training-stats { display: flex; gap: 12px; margin-bottom: 24px; justify-content: center; animation: fadeInUp 0.5s ease both; }
.t-stat { background: var(--bg-card); border: 1px solid var(--border); border-radius: 12px; padding: 12px 16px; text-align: center; min-width: 70px; }
.t-stat-val { font-family: 'Fraunces', serif; font-size: 16px; color: var(--accent); }
.t-stat-label { font-size: 9px; text-transform: uppercase; letter-spacing: 1px; color: var(--text-secondary); margin-top: 2px; }
.training-done-btn { animation: fadeInUp 0.5s ease both; margin: 0 auto; display: block !important; }

/* ─── Insights Screen ─── */
.insights-screen { padding: 20px; }
.screen-header { text-align: center; margin-bottom: 24px; }
.screen-header h2 { font-family: 'Fraunces', serif; font-size: 24px; font-weight: 400; }
.screen-header p { font-size: 13px; color: var(--text-secondary); margin-top: 4px; }
.chart-card { background: var(--bg-card); border: 1px solid var(--border); border-radius: 18px; padding: 18px; margin-bottom: 16px; transition: all var(--transition-speed) ease; }
.chart-card h3 { font-family: 'Fraunces', serif; font-size: 16px; font-weight: 400; margin-bottom: 14px; }

/* Emotion bars */
.emotion-bars { display: flex; flex-direction: column; gap: 8px; }
.ebar-row { display: flex; align-items: center; gap: 10px; }
.ebar-label { width: 80px; font-size: 12px; color: var(--text-secondary); text-align: right; }
.ebar-track { flex: 1; height: 8px; background: var(--bg-secondary); border-radius: 4px; overflow: hidden; }
.ebar-fill { height: 100%; border-radius: 4px; background: linear-gradient(90deg, var(--gradient-1), var(--gradient-2)); transition: width 1s ease; }
.ebar-count { width: 24px; font-size: 11px; color: var(--text-secondary); }

/* Mood timeline */
.mood-timeline { display: flex; align-items: flex-end; gap: 4px; height: 80px; padding-top: 10px; }
.mood-bar { flex: 1; border-radius: 4px 4px 0 0; background: linear-gradient(180deg, var(--gradient-1), var(--gradient-2)); opacity: 0.7; transition: all 0.5s ease; min-height: 4px; position: relative; }
.mood-bar:hover { opacity: 1; }
.mood-bar::after { content: attr(data-label); position: absolute; bottom: -18px; left: 50%; transform: translateX(-50%); font-size: 8px; color: var(--text-secondary); white-space: nowrap; }

/* FL card */
.fl-card .fl-desc { font-size: 12px; color: var(--text-secondary); line-height: 1.6; margin-bottom: 16px; }
.fl-stats-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; margin-bottom: 16px; }
.fl-stat-item { background: var(--bg-secondary); border-radius: 12px; padding: 12px; text-align: center; }
.fl-stat-value { font-family: 'Fraunces', serif; font-size: 20px; color: var(--accent); transition: color var(--transition-speed) ease; }
.fl-stat-label { font-size: 9px; text-transform: uppercase; letter-spacing: 1px; color: var(--text-secondary); margin-top: 2px; }
.fl-architecture { margin-top: 12px; }
.arch-label { font-size: 10px; text-transform: uppercase; letter-spacing: 1.5px; color: var(--text-secondary); margin-bottom: 10px; }
.arch-diagram { display: flex; align-items: center; justify-content: center; gap: 8px; flex-wrap: wrap; }
.arch-node { background: var(--bg-secondary); border: 1px solid var(--border); border-radius: 10px; padding: 10px 14px; font-size: 12px; text-align: center; }
.arch-node small { font-size: 10px; color: var(--text-secondary); display: block; margin-top: 2px; }
.arch-arrow { color: var(--accent); font-size: 16px; }

/* Entries list */
.entries-list { display: flex; flex-direction: column; gap: 10px; }
.entry-item { background: var(--bg-secondary); border-radius: 12px; padding: 14px; }
.entry-date { font-size: 10px; text-transform: uppercase; letter-spacing: 1px; color: var(--text-secondary); margin-bottom: 6px; }
.entry-text { font-size: 13px; color: var(--text-primary); line-height: 1.5; margin-bottom: 8px; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; }
.entry-tags { display: flex; gap: 6px; flex-wrap: wrap; }
.entry-tag { font-size: 10px; padding: 3px 8px; border-radius: 10px; background: var(--accent-soft); color: var(--accent); }
.empty-state { text-align: center; padding: 30px; font-size: 14px; color: var(--text-secondary); }

/* ─── Breathe Screen ─── */
.breathe-screen { padding: 20px; display: flex; flex-direction: column; align-items: center; }
.breathe-exercise-selector { display: flex; gap: 8px; margin-bottom: 30px; }
.breathe-type { background: var(--bg-card); border: 1px solid var(--border); border-radius: 20px; padding: 8px 20px; font-family: 'DM Sans', sans-serif; font-size: 13px; color: var(--text-secondary); cursor: pointer; transition: all 0.3s; }
.breathe-type.active { border-color: var(--accent); background: var(--accent-soft); color: var(--text-primary); }
.breathe-container { display: flex; flex-direction: column; align-items: center; gap: 24px; margin-bottom: 24px; }
.breathe-circle { width: 200px; height: 200px; border-radius: 50%; background: var(--accent-soft); border: 2px solid rgba(var(--accent-rgb), 0.3); display: flex; align-items: center; justify-content: center; cursor: pointer; transition: all 0.3s ease; position: relative; }
.breathe-circle::before { content: ''; position: absolute; inset: -8px; border-radius: 50%; border: 1px solid rgba(var(--accent-rgb), 0.15); transition: all var(--transition-speed) ease; }
.breathe-circle.breathing { animation: breatheAnim var(--breathe-duration, 16s) ease-in-out infinite; }
@keyframes breatheAnim {
  0%, 100% { transform: scale(0.8); background: rgba(var(--accent-rgb), 0.08); }
  25% { transform: scale(1.15); background: rgba(var(--accent-rgb), 0.2); }
  50% { transform: scale(1.15); background: rgba(var(--accent-rgb), 0.15); }
  75% { transform: scale(0.8); background: rgba(var(--accent-rgb), 0.08); }
}
.breathe-inner { text-align: center; z-index: 1; }
.breathe-text { font-family: 'Fraunces', serif; font-size: 20px; font-weight: 400; color: var(--text-primary); transition: color var(--transition-speed) ease; }
.breathe-timer { font-size: 40px; font-family: 'Fraunces', serif; color: var(--accent); margin-top: 4px; }
.breathe-guide { font-size: 13px; color: var(--text-secondary); }
.breathe-counter { font-size: 13px; color: var(--text-secondary); }

/* ─── Settings Screen ─── */
.settings-screen { padding: 20px; }
.settings-group { background: var(--bg-card); border: 1px solid var(--border); border-radius: 16px; padding: 16px; margin-bottom: 14px; }
.settings-group h3 { font-family: 'Fraunces', serif; font-size: 15px; font-weight: 400; margin-bottom: 12px; color: var(--text-primary); }
.setting-item { padding: 10px 0; border-bottom: 1px solid var(--border); }
.setting-item:last-child { border-bottom: none; }
.setting-item label { font-size: 14px; color: var(--text-primary); display: block; }
.setting-item small { font-size: 11px; color: var(--text-secondary); display: block; margin-top: 2px; }
.setting-input { width: 100%; margin-top: 6px; background: var(--bg-secondary); border: 1px solid var(--border); border-radius: 10px; padding: 10px 14px; font-family: 'DM Sans', sans-serif; font-size: 14px; color: var(--text-primary); outline: none; }
.setting-input:focus { border-color: var(--accent); }
.toggle-item { display: flex; align-items: center; justify-content: space-between; }
.toggle { width: 44px; height: 24px; border-radius: 12px; background: var(--bg-secondary); border: 1px solid var(--border); cursor: pointer; position: relative; transition: all 0.3s; flex-shrink: 0; }
.toggle.active { background: var(--accent); border-color: var(--accent); }
.toggle-knob { position: absolute; top: 2px; left: 2px; width: 18px; height: 18px; border-radius: 50%; background: white; transition: all 0.3s; }
.toggle.active .toggle-knob { left: 22px; }
.setting-action-btn { width: 100%; background: var(--bg-secondary); border: 1px solid var(--border); border-radius: 10px; padding: 12px; font-family: 'DM Sans', sans-serif; font-size: 13px; color: var(--text-primary); cursor: pointer; transition: all 0.3s; text-align: left; }
.setting-action-btn:hover { border-color: var(--accent); }
.setting-action-btn.danger { color: #e07070; }
.setting-action-btn.danger:hover { border-color: #e07070; background: rgba(224,112,112,0.1); }
.about-text p { font-size: 12px; color: var(--text-secondary); line-height: 1.6; margin-bottom: 10px; }
.tech-stack { display: flex; flex-wrap: wrap; gap: 6px; margin-top: 10px; }
.tech-tag { font-size: 10px; padding: 4px 10px; border-radius: 8px; background: var(--accent-soft); color: var(--accent); letter-spacing: 0.5px; }

/* ─── Bottom Nav ─── */
.bottom-nav { position: fixed; bottom: 0; left: 50%; transform: translateX(-50%); width: 100%; max-width: 440px; background: rgba(24, 25, 38, 0.9); backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px); border-top: 1px solid var(--border); display: flex; justify-content: space-around; padding: 10px 16px; padding-bottom: max(10px, env(safe-area-inset-bottom)); z-index: 10; transition: all var(--transition-speed) ease; }
.nav-item { display: flex; flex-direction: column; align-items: center; gap: 3px; background: none; border: none; cursor: pointer; color: var(--text-secondary); font-family: inherit; transition: color 0.3s; padding: 4px 8px; }
.nav-item.active { color: var(--accent); }
.nav-item svg { width: 20px; height: 20px; }
.nav-item span { font-size: 9px; text-transform: uppercase; letter-spacing: 0.8px; }

/* ─── Toast ─── */
.toast { position: fixed; bottom: 100px; left: 50%; transform: translateX(-50%) translateY(20px); background: var(--bg-card); border: 1px solid var(--accent); color: var(--text-primary); padding: 12px 24px; border-radius: 14px; font-size: 13px; opacity: 0; pointer-events: none; transition: all 0.4s ease; z-index: 100; box-shadow: 0 8px 30px var(--shadow); white-space: nowrap; max-width: 90%; }
.toast.show { opacity: 1; transform: translateX(-50%) translateY(0); }

/* ─── Onboarding ─── */
.onboarding-overlay { position: fixed; inset: 0; z-index: 200; background: var(--bg-primary); display: flex; align-items: center; justify-content: center; }
.onboarding-overlay.hidden { display: none; }
.onboarding-content { width: 100%; max-width: 400px; padding: 40px 28px; text-align: center; }
.onboarding-slides { position: relative; min-height: 360px; }
.onboarding-slide { position: absolute; inset: 0; opacity: 0; transform: translateX(30px); transition: all 0.5s ease; pointer-events: none; }
.onboarding-slide.active { opacity: 1; transform: translateX(0); pointer-events: all; }
.onboarding-icon { font-size: 56px; margin-bottom: 20px; }
.onboarding-slide h1 { font-family: 'Fraunces', serif; font-size: 28px; font-weight: 400; line-height: 1.3; margin-bottom: 14px; }
.accent-text { background: linear-gradient(135deg, var(--gradient-1), var(--gradient-2)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; }
.onboarding-slide p { font-size: 14px; color: var(--text-secondary); line-height: 1.7; }
.onboarding-features { display: flex; flex-direction: column; gap: 10px; margin-top: 24px; }
.ob-feature { display: flex; align-items: center; gap: 10px; background: var(--bg-card); border: 1px solid var(--border); border-radius: 12px; padding: 12px 16px; font-size: 13px; color: var(--text-secondary); text-align: left; }
.ob-feature span { font-size: 18px; }
.pipeline-visual { display: flex; align-items: center; justify-content: center; gap: 8px; margin-top: 30px; }
.pipe-step { display: flex; flex-direction: column; align-items: center; gap: 6px; }
.pipe-num { width: 36px; height: 36px; border-radius: 50%; background: var(--accent-soft); border: 1px solid var(--accent); display: flex; align-items: center; justify-content: center; font-family: 'Fraunces', serif; font-size: 16px; color: var(--accent); }
.pipe-step span { font-size: 10px; text-transform: uppercase; letter-spacing: 1px; color: var(--text-secondary); }
.pipe-arrow { color: var(--accent); font-size: 18px; margin-top: -14px; }
.onboarding-input { width: 100%; margin-top: 24px; background: var(--bg-card); border: 2px solid var(--border); border-radius: 14px; padding: 14px 18px; font-family: 'DM Sans', sans-serif; font-size: 16px; color: var(--text-primary); outline: none; text-align: center; transition: border-color 0.3s; }
.onboarding-input:focus { border-color: var(--accent); }
.onboarding-nav { display: flex; align-items: center; justify-content: space-between; margin-top: 30px; }
.onboarding-dots { display: flex; gap: 8px; }
.ob-dot { width: 8px; height: 8px; border-radius: 50%; background: var(--bg-card); border: 1px solid var(--border); transition: all 0.3s; }
.ob-dot.active { background: var(--accent); border-color: var(--accent); width: 24px; border-radius: 4px; }
.onboarding-btn { background: linear-gradient(135deg, var(--gradient-1), var(--gradient-2)); border: none; border-radius: 12px; padding: 12px 32px; font-family: 'DM Sans', sans-serif; font-size: 14px; font-weight: 600; color: white; cursor: pointer; transition: all 0.3s; }
.onboarding-btn:hover { transform: translateY(-1px); box-shadow: 0 6px 24px var(--accent-glow); }

/* ─── Scrollbar ─── */
::-webkit-scrollbar { width: 3px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: var(--accent-soft); border-radius: 10px; }

/* ─── Media Queries ─── */
@media (max-width: 380px) {
  .mood-selector { gap: 6px; }
  .mood-btn { padding: 6px 8px; }
  .mood-emoji { font-size: 18px; }
  .insights-row { gap: 6px; }
}
